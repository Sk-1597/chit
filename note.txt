import { getDatabase, ref, onValue } from "firebase/database";

const db = getDatabase();
const allBranchesRef = ref(db, "branches");

onValue(allBranchesRef, (snapshot) => {
  const data = snapshot.val();
  const allCustomers = [];

  for (const branch in data) {
    const customers = data[branch].customers;
    if (customers) {
      for (const custId in customers) {
        allCustomers.push({
          branch: branch,
          ...customers[custId]
        });
      }
    }
  }

  console.log("All Customers:", allCustomers);
  displayCustomers(allCustomers); // Use this function to render in table/UI
});



function displayCustomers(customers) {
  const table = document.getElementById("customerTable");
  table.innerHTML = "<tr><th>Branch</th><th>Name</th><th>Mobile</th></tr>";

  customers.forEach(cust => {
    const row = `<tr>
      <td>${cust.branch}</td>
      <td>${cust.name}</td>
      <td>${cust.mobile}</td>
    </tr>`;
    table.innerHTML += row;
  });
}


<table id="customerTable" border="1"></table>
